<div class="row">
	<div class="col-12 d-flex justify-content-center text-center">
		<div class="card">
			<div class="card-header card-header-primary">
				<h4 class="card-title">{{ (user$ | async) ? ('editUser' | translate) : ('addNewUser' | translate) }}</h4>
			</div>
			<div class="card-body">
				<form #userForm="ngForm">
					<input type="hidden" name="id" [(ngModel)]="user['_id']" />

					<!-- First Name Field -->
					<h3 class="h5 text-secondary">{{ 'firstName' | translate }} *</h3>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<input type="text" class="form-control" name="firstName" [(ngModel)]="user['firstName']" required
									pattern="^[a-űA-Űa-zA-Z \-\.,!()']{3,60}$" />
							</div>
							<div *ngIf="userForm.controls['firstName'] && !userForm.controls['firstName'].valid"
								class="alert alert-danger" role="alert">
								{{ 'firstNameValid' | translate }}
							</div>
						</div>
					</div>

					<!-- Last Name Field -->
					<h3 class="h5 text-secondary">{{ 'lastName' | translate }} *</h3>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<input type="text" class="form-control" name="lastName" [(ngModel)]="user['lastName']" required
									pattern="^[a-űA-Űa-zA-Z \-\.,!()']{3,60}$" />
							</div>
							<div *ngIf="userForm.controls['lastName'] && !userForm.controls['lastName'].valid"
								class="alert alert-danger" role="alert">
								{{ 'lastNameValid' | translate }}
							</div>
						</div>
					</div>

					<!-- Email Field -->
					<h3 class="h5 text-secondary">{{ 'email' | translate }} *</h3>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<input type="email" class="form-control" name="email" [(ngModel)]="user['email']" required />
							</div>
							<div *ngIf="userForm.controls['email'] && !userForm.controls['email'].valid" class="alert alert-danger"
								role="alert">
								{{ 'emailValid' | translate }}
							</div>
						</div>
					</div>

					<!-- Role Field -->
					<h3 class="h5 text-secondary">{{ 'role' | translate }} *</h3>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<input type="number" class="form-control" name="role" [(ngModel)]="user['role']" required min="1"
									max="3" />
							</div>
							<div *ngIf="userForm.controls['role'] && !userForm.controls['role'].valid" class="alert alert-danger"
								role="alert">
								{{ 'roleValid' | translate }}
							</div>
						</div>
					</div>

					<!-- Password Field -->
					<h3 class="h5 text-secondary">{{ 'Password' | translate }} *</h3>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<input type="password" class="form-control" name="password" [(ngModel)]="user['password']" required
									pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{7,}$" />
							</div>
							<div *ngIf="userForm.controls['password'] && !userForm.controls['password'].valid"
								class="alert alert-danger" role="alert">
								{{ 'passValid2' | translate }}
							</div>
						</div>
					</div>

					<!-- Action Buttons -->
					<div class="d-flex justify-content-between">
						<button *ngIf="user$ | async" (click)="onUpdate(user)" [disabled]="userForm.invalid" type="submit"
							class="btn btn-primary">
							{{ 'updateUser' | translate }}
						</button>
						<button *ngIf="!(user$ | async)" (click)="onCreate(user)" [disabled]="userForm.invalid" type="submit"
							class="btn btn-primary">
							{{ 'createUser' | translate }}
						</button>
						<button routerLink="/users" type="button" class="btn btn-danger">{{ 'cancelEdit' | translate }}</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	<div class="col-md-4"></div>
</div>